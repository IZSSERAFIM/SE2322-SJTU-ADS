# 522031910747+李若彬+hw4

[toc]

>1. 请以“插⼊”操作为例，解释插⼊操作是如何使得红⿊树依然维持以上五个性质，具体⽽⾔，请回答  ：
>    1. 为什么规定插⼊的结点为红⾊  
>    2. 当插⼊结点的⽗结点为红⾊，如何操作帮助其恢复该性质（假设此时⽗节点的兄弟结点为⿊⾊）  

## 1.1

因为如果插入的结点是黑色的话，会导致根结点的某一条路径上多了一个黑色结点，从而破坏`性质5：从任⼀结点到其每个叶⼦的所有路径都包含相同数⽬的⿊⾊结点`，而这种情况下对于整棵红黑树的调整将会异常复杂。相反的，如果插入的是红色结点可能会导致出现连续的两个红色结点，而此时只需通过颜色调换或树旋转来调整，这样操作将会简单许多。

## 1.2

假定父节点P是其祖父G的左子节点。如果它是右子节点，以下**1. 2.**两种情况的*左*和*右*应当对调。

1. 父节点P是红色而叔父节点U是黑色或缺少，并且新节点N是其父节点P的右子节点而父节点P又是其父节点的左子节点

   ![情形4示意图](https://upload.wikimedia.org/wikipedia/commons/5/56/Red-black_tree_insert_case_4.png)

   进行一次左旋转调换新节点和其父节点的角色；接着，我们按**2.**处理以前的父节点P以解决仍然失效的性质4。注意这个改变会导致某些路径通过它们以前不通过的新节点N（比如图中1号叶子节点）或不通过节点P（比如图中3号叶子节点），但由于这两个节点都是红色的，所以性质5仍有效

2. 父节点P是红色而叔父节点U是黑色或缺少，新节点N是其父节点的左子节点，而父节点P又是其父节点G的左子节点

   ![情形5示意图](https://upload.wikimedia.org/wikipedia/commons/6/66/Red-black_tree_insert_case_5.png)
   
   进行针对祖父节点G的一次右旋转；在旋转产生的树中，以前的父节点P现在是新节点N和以前的祖父节点G的父节点。我们知道以前的祖父节点G是黑色，否则父节点P就不可能是红色（如果P和G都是红色就违反了性质4，所以G必须是黑色）。我们切换以前的父节点P和祖父节点G的颜色，结果的树满足性质4。性质5也仍然保持满足，因为通过这三个节点中任何一个的所有路径以前都通过祖父节点G，现在它们都通过以前的父节点P。在各自的情形下，这都是三个节点中唯一的黑色节点。

> 2. 红⿊树的本质是⼀个2-3-4树（4阶B树），请谈⼀谈你对这句话的理解  

## 2.

![rbtree-btree-analogy](https://oi-wiki.org/ds/images/rbtree-btree-analogy.svg)

红黑树与 4 阶 B 树每个簇（对于红黑树来说一个簇是一个非 NIL 黑色节点和它的两个子节点，对 B 树来说一个簇就是一个节点）的最大容量为 3 且最小填充量均为 $\frac{1}{3}$。因此可以在一定程度上认为红黑树与 4 阶 B 树（2-3-4 树)在结构上是等价的。

> 3. 红⿊树顺序插⼊和乱序插⼊会有何影响？  

## 3.

顺序插入会导致树总是朝一侧生长，这会导致树的结构不对称，树高较高，并会使其平衡性降低从而导致查找的效率大大降低。而乱序插入则会大大增加树的平衡性，使得查找的效率大大增加。